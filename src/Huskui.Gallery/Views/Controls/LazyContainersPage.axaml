<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:husk="https://github.com/d3ara1n/Huskui.Avalonia"
             xmlns:controls="clr-namespace:Huskui.Gallery.Controls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Huskui.Gallery.Views.Controls.LazyContainersPage">

    <ScrollViewer>
        <StackPanel Margin="24" Spacing="32">

            <controls:ExampleContainer Title="Basic Lazy Loading"
                                       Description="Container that shows error state when content fails to load">
                <controls:ExampleContainer.Controls>
                    <StackPanel Spacing="12">
                        <TextBlock Text="Error State" FontWeight="Bold" FontSize="14" />
                        <ToggleButton x:Name="BadToggle" Content="Simulate Error" />
                        <Button x:Name="RefreshButton" Content="Refresh" Click="OnRefreshClick" />
                        <TextBlock Text="Toggle error state to see fallback content and retry functionality." 
                                   TextWrapping="Wrap" 
                                   FontSize="12" 
                                   Foreground="{StaticResource ControlSecondaryForegroundBrush}" />
                    </StackPanel>
                </controls:ExampleContainer.Controls>
                
                <husk:LazyContainer x:Name="BasicLazy" 
                                    IsBad="{Binding #BadToggle.IsChecked}"
                                    Width="400" Height="200">
                    <husk:LazyContainer.BadContent>
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                            <TextBlock Text="⚠️" FontSize="32" HorizontalAlignment="Center" />
                            <TextBlock Text="Failed to load content" HorizontalAlignment="Center" FontWeight="Bold" />
                            <TextBlock Text="Please check your connection and try again" 
                                       HorizontalAlignment="Center" 
                                       Foreground="{StaticResource ControlSecondaryForegroundBrush}" />
                            <Button Content="Retry" Classes="Primary" HorizontalAlignment="Center" />
                        </StackPanel>
                    </husk:LazyContainer.BadContent>
                    
                    <husk:Card Padding="20">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Content Loaded Successfully" FontSize="16" FontWeight="Bold" />
                            <TextBlock Text="This content is displayed when the LazyContainer is in normal state." />
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <Button Content="Action 1" Classes="Primary" />
                                <Button Content="Action 2" />
                            </StackPanel>
                        </StackPanel>
                    </husk:Card>
                </husk:LazyContainer>
            </controls:ExampleContainer>

            <controls:ExampleContainer Title="Image Loading Example"
                                       Description="Simulating image loading with error fallback">
                <controls:ExampleContainer.Controls>
                    <StackPanel Spacing="12">
                        <TextBlock Text="Image Controls" FontWeight="Bold" FontSize="14" />
                        <ToggleButton x:Name="ImageErrorToggle" Content="Image Error" />
                        <Button Content="Reload Image" Click="OnReloadImageClick" />
                        <TextBlock Text="Simulate image loading failures and recovery." 
                                   TextWrapping="Wrap" 
                                   FontSize="12" 
                                   Foreground="{StaticResource ControlSecondaryForegroundBrush}" />
                    </StackPanel>
                </controls:ExampleContainer.Controls>
                
                <husk:LazyContainer x:Name="ImageLazy" 
                                    IsBad="{Binding #ImageErrorToggle.IsChecked}"
                                    Width="300" Height="250">
                    <husk:LazyContainer.BadContent>
                        <Border Background="{StaticResource ControlTranslucentFullBackgroundBrush}"
                                CornerRadius="8">
                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                                <TextBlock Text="🖼️" FontSize="48" HorizontalAlignment="Center" />
                                <TextBlock Text="Image failed to load" HorizontalAlignment="Center" FontWeight="Bold" />
                                <Button Content="Try Again" Classes="Outline" HorizontalAlignment="Center" />
                            </StackPanel>
                        </Border>
                    </husk:LazyContainer.BadContent>
                    
                    <Border Background="{StaticResource ControlAccentBackgroundBrush}"
                            CornerRadius="8">
                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                            <TextBlock Text="📷" FontSize="64" HorizontalAlignment="Center" />
                            <TextBlock Text="Beautiful Image" HorizontalAlignment="Center" FontWeight="Bold" />
                            <TextBlock Text="1920x1080 • 2.5MB" 
                                       HorizontalAlignment="Center" 
                                       FontSize="12"
                                       Foreground="{StaticResource ControlSecondaryForegroundBrush}" />
                        </StackPanel>
                    </Border>
                </husk:LazyContainer>
            </controls:ExampleContainer>

        </StackPanel>
    </ScrollViewer>

</UserControl>
