<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="https://github.com/d3ara1n/Huskui.Avalonia">
    <ControlTheme
        x:Key="{x:Type local:Dialog}"
        TargetType="local:Dialog">
        <Setter Property="Container" Value="{Binding $parent[local:OverlayItem], Mode=OneWay}" />
        <Setter Property="MinHeight" Value="128" />
        <Setter Property="MinWidth" Value="256" />
        <Setter Property="Background" Value="{StaticResource FlyoutBackgroundBrush}" />
        <Setter Property="CornerRadius" Value="{StaticResource LargeCornerRadius}" />
        <Setter Property="BorderBrush" Value="{StaticResource ControlBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="PrimaryText" Value="Confirm" />
        <Setter Property="SecondaryText" Value="Cancel" />
        <Setter Property="FontWeight" Value="{StaticResource ControlFontWeight}" />
        <Setter Property="Margin" Value="24" />
        <Setter Property="Template">
            <ControlTemplate>
                <Border
                    Background="{TemplateBinding Background}"
                    BackgroundSizing="{TemplateBinding BackgroundSizing}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="{TemplateBinding CornerRadius}">
                    <Grid RowDefinitions="Auto,Auto,*,Auto">
                        <ContentPresenter
                            Name="PART_HeaderPresenter"
                            Grid.Row="0"
                            Content="{TemplateBinding Header}"
                            ContentTemplate="{TemplateBinding HeaderTemplate}" />
                        <StackPanel
                            Grid.Row="1"
                            Margin="18,18,18,0"
                            Spacing="4">
                            <TextBlock
                                IsVisible="{Binding Title, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                FontSize="{StaticResource LargeFontSize}"
                                FontWeight="{StaticResource ControlStrongFontWeight}"
                                Text="{TemplateBinding Title}" />
                            <TextBlock
                                MaxWidth="{Binding #PART_ContentPresenter.Bounds.Width}"
                                IsVisible="{Binding Message, RelativeSource={RelativeSource Mode=TemplatedParent}, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                                FontSize="{StaticResource SmallFontSize}"
                                Foreground="{StaticResource ControlSecondaryForegroundBrush}"
                                Text="{TemplateBinding Message}"
                                TextWrapping="WrapWithOverflow" />
                        </StackPanel>
                        <ContentPresenter
                            Name="PART_ContentPresenter"
                            Grid.Row="2"
                            Margin="18,18,18,0"
                            Content="{TemplateBinding Content}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            Foreground="{TemplateBinding Foreground}" />
                        <Grid
                            Grid.Row="3"
                            Margin="18"
                            ColumnDefinitions="*,*"
                            ColumnSpacing="8">
                            <Button
                                Grid.Column="0"
                                Classes="Primary"
                                IsVisible="{TemplateBinding IsPrimaryButtonVisible}"
                                Command="{Binding PrimaryCommand, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                IsDefault="True">
                                <TextBlock Text="{TemplateBinding PrimaryText}" />
                            </Button>
                            <Button
                                Grid.Column="{TemplateBinding IsPrimaryButtonVisible,
                                                              Converter={x:Static local:InternalConverters.ButtonColumn},
                                                              ConverterParameter=1}"
                                Grid.ColumnSpan="{TemplateBinding IsPrimaryButtonVisible,
                                                                  Converter={x:Static local:InternalConverters.ButtonColumnSpan},
                                                                  ConverterParameter=2}"
                                Command="{Binding SecondaryCommand, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                IsCancel="True">
                                <TextBlock Text="{TemplateBinding SecondaryText}" />
                            </Button>
                        </Grid>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>
    </ControlTheme>
</ResourceDictionary>
