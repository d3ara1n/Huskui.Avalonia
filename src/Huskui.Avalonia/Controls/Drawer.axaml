<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="https://github.com/d3ara1n/Huskui.Avalonia"
                    xmlns:icons="using:Huskui.Avalonia.Icons">

    <ControlTheme x:Key="{x:Type local:Drawer}" TargetType="local:Drawer">
        <Setter Property="Background" Value="{StaticResource ControlBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ControlBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="{StaticResource OverlayCornerRadius}" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="MinWidth" Value="200" />
        <Setter Property="MinHeight" Value="100" />
        <Setter Property="Width" Value="400" />
        <Setter Property="Height" Value="300" />
        <Setter Property="Template">
            <ControlTemplate>
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius, Converter={StaticResource TopCornerRadiusConverter}}"
                        BoxShadow="0 0 20 0 #20000000">
                    <Grid RowDefinitions="Auto,*">
                        <!-- Header -->
                        <Grid Name="{x:Static local:Drawer.PART_Header}"
                              Grid.Row="0"
                              Height="{TemplateBinding HeaderHeight}"
                              Background="Transparent"
                              ColumnDefinitions="Auto,*,Auto,Auto">
                            
                            <!-- Drag Handle Icon -->
                            <PathIcon Data="M 4 8 L 20 8 M 4 16 L 20 16" 
                                      Width="16" Height="16" 
                                      Margin="12,0,0,0"
                                      Foreground="{StaticResource ControlForegroundBrush}"
                                      Opacity="0.5"
                                      VerticalAlignment="Center"/>

                            <!-- Title -->
                            <TextBlock Grid.Column="1"
                                       Text="{TemplateBinding Title}"
                                       VerticalAlignment="Center"
                                       Margin="12,0"
                                       FontWeight="SemiBold"
                                       IsHitTestVisible="False"/>

                            <!-- Toggle Button -->
                            <Button Name="{x:Static local:Drawer.PART_ToggleStateButton}"
                                    Grid.Column="2"
                                    Theme="{StaticResource TransparentButtonTheme}"
                                    Padding="8"
                                    Margin="0,0,4,0">
                                <PathIcon Data="M 4 14 L 12 6 L 20 14" 
                                          Width="12" Height="12"
                                          Name="ToggleIcon"/>
                            </Button>

                            <!-- Close Button -->
                            <Button Name="{x:Static local:Drawer.PART_CloseButton}"
                                    Grid.Column="3"
                                    Theme="{StaticResource TransparentButtonTheme}"
                                    Padding="8"
                                    Margin="0,0,4,0">
                                <PathIcon Data="M 6 6 L 18 18 M 6 18 L 18 6" 
                                          Width="12" Height="12"/>
                            </Button>
                        </Grid>

                        <!-- Content -->
                        <ContentPresenter Grid.Row="1"
                                          Content="{TemplateBinding Content}"
                                          ContentTemplate="{TemplateBinding ContentTemplate}"
                                          Margin="{TemplateBinding Padding}"/>

                        <!-- Resize Handles -->
                        <Border Name="{x:Static local:Drawer.PART_ResizeLeft}"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Stretch"
                                Width="4"
                                Background="Transparent"
                                Cursor="SizeWestEast"
                                Grid.RowSpan="2"/>
                        
                        <Border Name="{x:Static local:Drawer.PART_ResizeRight}"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Stretch"
                                Width="4"
                                Background="Transparent"
                                Cursor="SizeWestEast"
                                Grid.RowSpan="2"/>
                        
                        <Border Name="{x:Static local:Drawer.PART_ResizeTop}"
                                VerticalAlignment="Top"
                                HorizontalAlignment="Stretch"
                                Height="4"
                                Background="Transparent"
                                Cursor="SizeNorthSouth"
                                Grid.Row="0"/>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:closed">
            <Setter Property="Height" Value="{Binding HeaderHeight, RelativeSource={RelativeSource Self}}" />
            <Style Selector="^ /template/ PathIcon#ToggleIcon">
                <Setter Property="Data" Value="M 4 10 L 12 18 L 20 10" />
            </Style>
            <Style Selector="^ /template/ ContentPresenter">
                <Setter Property="IsVisible" Value="False" />
            </Style>
            <Style Selector="^ /template/ Border#PART_ResizeTop">
                <Setter Property="IsHitTestVisible" Value="False" />
            </Style>
        </Style>
        
        <Style Selector="^:open">
             <Style Selector="^ /template/ PathIcon#ToggleIcon">
                <Setter Property="Data" Value="M 4 14 L 12 6 L 20 14" />
            </Style>
        </Style>

    </ControlTheme>
</ResourceDictionary>