<ResourceDictionary
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:fi="clr-namespace:FluentIcons.Avalonia;assembly=FluentIcons.Avalonia">
    <Design.PreviewWith>
        <Panel Background="White">
            <StackPanel
                Margin="24"
                Spacing="12">
                <ComboBox SelectedIndex="0">
                    <ComboBoxItem>
                        <TextBlock Text="Hello World" />
                    </ComboBoxItem>
                </ComboBox>
                <ComboBox PlaceholderText="Placeholder">
                    <ComboBoxItem>
                        <TextBlock Text="Hello World" />
                    </ComboBoxItem>
                </ComboBox>
            </StackPanel>
        </Panel>
    </Design.PreviewWith>
    <ControlTheme
        x:Key="{x:Type ComboBox}"
        TargetType="ComboBox">
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Foreground" Value="{StaticResource ControlForegroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ControlInteractiveBorderBrush}" />
        <Setter Property="PlaceholderForeground" Value="{StaticResource ControlSecondaryForegroundBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="MaxDropDownHeight" Value="504" />
        <Setter Property="Background" Value="{StaticResource OverlayInteractiveBackgroundBrush}" />
        <Setter Property="CornerRadius" Value="{StaticResource SmallCornerRadius}" />
        <Setter Property="FontSize" Value="{StaticResource MediumFontSize}" />
        <Setter Property="Padding" Value="12,8" />
        <Setter Property="Template">
            <ControlTemplate>
                <DataValidationErrors>
                    <Panel>
                        <Border
                            x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <Border.Transitions>
                                <Transitions>
                                    <BrushTransition
                                        Easing="SineEaseOut"
                                        Property="BorderBrush"
                                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                                    <BrushTransition
                                        Easing="SineEaseOut"
                                        Property="Background"
                                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                                </Transitions>
                            </Border.Transitions>

                            <Grid
                                Margin="{TemplateBinding Padding}"
                                ColumnDefinitions="*,6,Auto">
                                <Panel Grid.Column="0">
                                    <TextBlock
                                        Name="PlaceholderTextBlock"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        IsVisible="{TemplateBinding SelectionBoxItem,
                                                                    Converter={x:Static ObjectConverters.IsNull}}"
                                        Foreground="{TemplateBinding PlaceholderForeground}"
                                        Text="{TemplateBinding PlaceholderText}"
                                        TextTrimming="CharacterEllipsis" />
                                    <ContentPresenter
                                        Name="PART_ContentPresenter"
                                        HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                        Content="{TemplateBinding SelectionBoxItem}"
                                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" />
                                </Panel>
                                <fi:SymbolIcon
                                    Grid.Column="2"
                                    FontSize="{TemplateBinding FontSize}"
                                    Symbol="ChevronUpDown" />
                            </Grid>
                        </Border>
                        <Border
                            x:Name="GlowBorder"
                            BorderBrush="{StaticResource TransparentBrush}"
                            BorderThickness="2"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <Border.Transitions>
                                <Transitions>
                                    <BrushTransition
                                        Easing="SineEaseOut"
                                        Property="BorderBrush"
                                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                                </Transitions>
                            </Border.Transitions>
                        </Border>
                        <Popup
                            Name="PART_Popup"
                            MinWidth="{Binding Bounds.Width, RelativeSource={RelativeSource TemplatedParent}}"
                            MinHeight="12"
                            MaxHeight="{TemplateBinding MaxDropDownHeight}"
                            InheritsTransform="True"
                            IsLightDismissEnabled="True"
                            IsOpen="{TemplateBinding IsDropDownOpen,
                                                     Mode=TwoWay}"
                            PlacementTarget="{TemplateBinding}">
                            <Border
                                Margin="2,4"
                                Background="{StaticResource FlyoutBackgroundBrush}"
                                ClipToBounds="True"
                                CornerRadius="{StaticResource SmallCornerRadius}">
                                <Border.Effect>
                                    <DropShadowEffect
                                        OffsetX="0"
                                        OffsetY="0"
                                        Opacity="0.2" />
                                </Border.Effect>
                                <ScrollViewer
                                    HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                    IsDeferredScrollingEnabled="{TemplateBinding (ScrollViewer.IsDeferredScrollingEnabled)}"
                                    VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                                    <ItemsPresenter ItemsPanel="{TemplateBinding ItemsPanel}" />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Panel>
                </DataValidationErrors>
            </ControlTemplate>
        </Setter>


        <Style Selector="^:focus:not(:dropdownopen) /template/ Border#GlowBorder">
            <Setter Property="BorderBrush" Value="{StaticResource ControlAccentInteractiveBorderBrush}" />
        </Style>

        <Style Selector="^:pointerover /template/ Border#Border">
            <Setter Property="Background" Value="{StaticResource OverlaySolidBackgroundBrush}" />
        </Style>

        <Style Selector="^:disabled /template/ Border#Border">
            <Setter Property="Opacity" Value="{StaticResource ControlDimOpacity}" />
        </Style>
    </ControlTheme>

    <ControlTheme
        x:Key="{x:Type ComboBoxItem}"
        TargetType="ComboBoxItem">
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="CornerRadius" Value="{StaticResource SmallCornerRadius}" />
        <Setter Property="Background" Value="{StaticResource TransparentBrush}" />
        <Setter Property="Padding" Value="12,8" />
        <Setter Property="ClipToBounds" Value="True" />
        <Setter Property="FontSize" Value="{StaticResource MediumFontSize}" />
        <Setter Property="Template">
            <ControlTemplate>
                <Border
                    Name="Border"
                    Margin="2"
                    Background="{TemplateBinding Background}"
                    BackgroundSizing="{TemplateBinding BackgroundSizing}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    ClipToBounds="{TemplateBinding ClipToBounds}"
                    CornerRadius="{TemplateBinding CornerRadius}">
                    <Border.Transitions>
                        <Transitions>
                            <BrushTransition
                                Easing="SineEaseOut"
                                Property="Background"
                                Duration="{StaticResource ControlFastestAnimationDuration}" />
                        </Transitions>
                    </Border.Transitions>
                    <Grid
                        Margin="{TemplateBinding Padding}"
                        ColumnDefinitions="*,6,Auto">
                        <ContentPresenter
                            Name="PART_ContentPresenter"
                            Grid.Column="0"
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                            Content="{TemplateBinding Content}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            RenderTransform="{x:Null}">
                            <ContentPresenter.Transitions>
                                <Transitions>
                                    <TransformOperationsTransition
                                        Easing="SineEaseOut"
                                        Property="RenderTransform"
                                        Duration="{StaticResource ControlFastestAnimationDuration}" />
                                </Transitions>
                            </ContentPresenter.Transitions>
                        </ContentPresenter>
                        <fi:SymbolIcon
                            Name="Mark"
                            Grid.Column="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            IsVisible="False"
                            FontSize="{TemplateBinding FontSize}"
                            Foreground="{StaticResource ControlAccentForegroundBrush}"
                            Symbol="Checkmark" />
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:pointerover:not(:selected)">
            <Style Selector="^ /template/ Border#Border">
                <Setter Property="Background" Value="{StaticResource OverlayHalfBackgroundBrush}" />
            </Style>

            <Style Selector="^ /template/ ContentPresenter#PART_ContentPresenter">
                <Setter Property="RenderTransform" Value="translateX(8px)" />
            </Style>
        </Style>

        <Style Selector="^:selected /template/ Border#Border">
            <Setter Property="Background" Value="{StaticResource ControlBackgroundBrush}" />
            <Setter Property="Margin" Value="0" />
            <Setter Property="CornerRadius" Value="0" />
        </Style>

        <Style Selector="^:selected /template/ fi|SymbolIcon#Mark">
            <Setter Property="IsVisible" Value="True" />
        </Style>

        <Style Selector="^:disabled /template/ Border#Border">
            <Setter Property="Opacity" Value="{StaticResource ControlDimOpacity}" />
        </Style>
    </ControlTheme>

    <ControlTheme
        x:Key="GhostComboBoxTheme"
        TargetType="ComboBox">
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="Foreground" Value="{StaticResource ControlForegroundBrush}" />
        <Setter Property="PlaceholderForeground" Value="{StaticResource ControlSecondaryForegroundBrush}" />
        <Setter Property="MaxDropDownHeight" Value="504" />
        <Setter Property="Background" Value="{StaticResource TransparentBrush}" />
        <Setter Property="CornerRadius" Value="{StaticResource SmallCornerRadius}" />
        <Setter Property="FontSize" Value="{StaticResource MediumFontSize}" />
        <Setter Property="Padding" Value="12,8" />
        <Setter Property="Template">
            <ControlTemplate>
                <DataValidationErrors>
                    <Panel>
                        <Border
                            x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                            <Border.Transitions>
                                <Transitions>
                                    <BrushTransition
                                        Easing="SineEaseOut"
                                        Property="BorderBrush"
                                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                                    <BrushTransition
                                        Easing="SineEaseOut"
                                        Property="Background"
                                        Duration="{StaticResource ControlFasterAnimationDuration}" />
                                </Transitions>
                            </Border.Transitions>

                            <Grid
                                Margin="{TemplateBinding Padding}"
                                ColumnDefinitions="*,6,Auto">
                                <Panel Grid.Column="0">
                                    <TextBlock
                                        Name="PlaceholderTextBlock"
                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                        IsVisible="{TemplateBinding SelectionBoxItem,
                                                                    Converter={x:Static ObjectConverters.IsNull}}"
                                        Foreground="{TemplateBinding PlaceholderForeground}"
                                        Text="{TemplateBinding PlaceholderText}"
                                        TextTrimming="CharacterEllipsis" />
                                    <ContentPresenter
                                        Name="PART_ContentPresenter"
                                        HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                        Content="{TemplateBinding SelectionBoxItem}"
                                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" />
                                </Panel>
                                <fi:SymbolIcon
                                    Grid.Column="2"
                                    FontSize="{TemplateBinding FontSize}"
                                    Symbol="ChevronUpDown" />
                            </Grid>
                        </Border>
                        <Popup
                            Name="PART_Popup"
                            MinWidth="{Binding Bounds.Width, RelativeSource={RelativeSource TemplatedParent}}"
                            MaxHeight="{TemplateBinding MaxDropDownHeight}"
                            InheritsTransform="True"
                            IsLightDismissEnabled="True"
                            IsOpen="{TemplateBinding IsDropDownOpen,
                                                     Mode=TwoWay}"
                            PlacementTarget="{TemplateBinding}">
                            <Border
                                Margin="2,4"
                                Background="{StaticResource FlyoutBackgroundBrush}"
                                ClipToBounds="True"
                                CornerRadius="{StaticResource SmallCornerRadius}">
                                <Border.Effect>
                                    <DropShadowEffect
                                        OffsetX="0"
                                        OffsetY="0"
                                        Opacity="0.2" />
                                </Border.Effect>
                                <ScrollViewer
                                    HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                                    IsDeferredScrollingEnabled="{TemplateBinding (ScrollViewer.IsDeferredScrollingEnabled)}"
                                    VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                                    <ItemsPresenter ItemsPanel="{TemplateBinding ItemsPanel}" />
                                </ScrollViewer>
                            </Border>
                        </Popup>
                    </Panel>
                </DataValidationErrors>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:pointerover /template/ Border#Border">
            <Setter Property="Background" Value="{StaticResource OverlayHalfBackgroundBrush}" />
        </Style>

        <Style Selector="^:disabled /template/ Border#Border">
            <Setter Property="Opacity" Value="{StaticResource ControlDimOpacity}" />
        </Style>
    </ControlTheme>
</ResourceDictionary>
